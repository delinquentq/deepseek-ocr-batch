{
  "summary": {
    "total": 6,
    "passed": 6,
    "failed": 0
  },
  "details": {
    "环境测试": {
      "status": "PASS",
      "details": {
        "python_version": "3.10.19",
        "torch_version": "2.6.0+cu118",
        "cuda_available": true,
        "gpu_name": "NVIDIA GeForce RTX 4090",
        "gpu_memory": 47.98779296875,
        "vllm_available": true,
        "transformers_available": true,
        "PIL_available": true,
        "jsonschema_available": true,
        "numpy_available": true,
        "tqdm_available": true,
        "img2pdf_available": true,
        "fitz_available": true
      }
    },
    "配置验证": {
      "status": "PASS",
      "details": {
        "environment_setup": "SUCCESS",
        "config_validation": "SUCCESS",
        "schema_path": "EXISTS",
        "input_dir": "EXISTS",
        "output_dir": "EXISTS"
      }
    },
    "JSON Schema验证": {
      "status": "PASS",
      "details": {
        "schema_load": "SUCCESS",
        "example_validation": "FAIL: 'schema_version' is a required property\n\nFailed validating 'required' in schema:\n    {'$schema': 'http://json-schema.org/draft-07/schema#',\n     '$id': 'https://example.com/schemas/fin_report_extract.v1_3_1.json',\n     'title': 'Financial Report Extraction (v1.3.1, backward compatible '\n              'with v1.3.0)',\n     'type': 'object',\n     'required': ['schema_version', 'doc', 'passages', 'entities', 'data'],\n     'properties': {'schema_version': {'type': 'string', 'const': '1.3.1'},\n                    'doc': {'type': 'object',\n                            'required': ['doc_id',\n                                         'title',\n                                         'timestamps',\n                                         'extraction_run'],\n                            'properties': {'doc_id': {'type': 'string',\n                                                      'description': '文档稳定ID（如内容hash/URI+hash）'},\n                                           'title': {'type': 'string'},\n                                           'source_uri': {'type': 'string',\n                                                          'description': '文件名或URL'},\n                                           'language': {'type': 'string',\n                                                        'description': 'en/zh/...'},\n                                           'report_date': {'type': 'string',\n                                                           'format': 'date'},\n                                           'report_type': {'type': 'string',\n                                                           'enum': ['company',\n                                                                    'sector',\n                                                                    'macro',\n                                                                    'other']},\n                                           'sector': {'type': 'string'},\n                                           'tickers': {'type': 'array',\n                                                       'items': {'type': 'string'}},\n                                           'symbols': {'type': 'array',\n                                                       'items': {'type': 'string'},\n                                                       'description': 'tickers '\n                                                                      '的别名（可选，兼容旧结构）'},\n                                           'word_count': {'type': 'integer',\n                                                          'minimum': 0},\n                                           'full_text': {'type': 'string',\n                                                         'description': '可选：报告全文原文，便于审计/重切分'},\n                                           'timestamps': {'type': 'object',\n                                                          'required': ['ingested_at',\n                                                                       'extracted_at'],\n                                                          'properties': {'ingested_at': {'type': 'string',\n                                                                                         'format': 'date-time'},\n                                                                         'extracted_at': {'type': 'string',\n                                                                                          'format': 'date-time'}}},\n                                           'extraction_run': {'type': 'object',\n                                                              'required': ['pipeline_steps'],\n                                                              'properties': {'vision_model': {'type': 'string'},\n                                                                             'synthesis_model': {'type': 'string'},\n                                                                             'validation_model': {'type': 'string'},\n                                                                             'pipeline_steps': {'type': 'array',\n                                                                                                'items': {'type': 'string'}},\n                                                                             'runtime': {'type': 'string'},\n                                                                             'processing_metadata': {'type': 'object',\n                                                                                                     'properties': {'pages_processed': {'type': 'integer',\n                                                                                                                                        'minimum': 0},\n                                                                                                                    'successful_pages': {'type': 'integer',\n                                                                                                                                         'minimum': 0},\n                                                                                                                    'notes': {'type': 'string'}},\n                                                                                                     'description': '兼容/吸收另一份结构中的处理统计信息'}}}}},\n                    'passages': {'type': 'array',\n                                 'description': '用于RAG的可检索文本片段（段落/要点/标题/脚注等）',\n                                 'items': {'type': 'object',\n                                           'required': ['passage_id',\n                                                        'text',\n                                                        'page'],\n                                           'properties': {'passage_id': {'type': 'string'},\n                                                          'page': {'type': 'integer',\n                                                                   'minimum': 1},\n                                                          'bbox': {'$ref': '#/$defs/bbox'},\n                                                          'section': {'type': 'string',\n                                                                      'description': '章节/小节标题'},\n                                                          'text': {'type': 'string'},\n                                                          'labels': {'type': 'array',\n                                                                     'items': {'type': 'string'},\n                                                                     'description': '如 '\n                                                                                    'executive_summary, '\n                                                                                    'risk, '\n                                                                                    'guidance '\n                                                                                    '等'},\n                                                          'entities': {'type': 'array',\n                                                                       'items': {'type': 'string'},\n                                                                       'description': '引用 '\n                                                                                      'entities.entity_id'}}}},\n                    'entities': {'type': 'array',\n                                 'description': '标准化实体（公司/指数/政府/产品线等）',\n                                 'items': {'type': 'object',\n                                           'required': ['entity_id',\n                                                        'name'],\n                                           'properties': {'entity_id': {'type': 'string'},\n                                                          'type': {'type': 'string',\n                                                                   'enum': ['company',\n                                                                            'index',\n                                                                            'government',\n                                                                            'product',\n                                                                            'other']},\n                                                          'name': {'type': 'string'},\n                                                          'ticker': {'type': 'string'},\n                                                          'isin': {'type': 'string'},\n                                                          'lei': {'type': 'string'},\n                                                          'country': {'type': 'string'},\n                                                          'aliases': {'type': 'array',\n                                                                      'items': {'type': 'string'}}}}},\n                    'data': {'type': 'object',\n                             'required': ['figures',\n                                          'tables',\n                                          'numerical_data',\n                                          'claims',\n                                          'relations',\n                                          'extraction_summary'],\n                             'properties': {'figures': {'type': 'array',\n                                                        'description': '图表及其可重建数据',\n                                                        'items': {'type': 'object',\n                                                                  'required': ['figure_id',\n                                                                               'title',\n                                                                               'page',\n                                                                               'type',\n                                                                               'series',\n                                                                               'provenance'],\n                                                                  'properties': {'figure_id': {'type': 'string',\n                                                                                               'description': '内容稳定ID（基于标题/labels/series的hash）'},\n                                                                                 'figure_key': {'type': 'string',\n                                                                                                'description': '来源里的原始ID（可选）'},\n                                                                                 'title': {'type': 'string'},\n                                                                                 'description': {'type': 'string',\n                                                                                                 'description': '补充说明（来自图注或上下文）'},\n                                                                                 'caption': {'type': 'string'},\n                                                                                 'page': {'type': 'integer',\n                                                                                          'minimum': 1},\n                                                                                 'type': {'type': 'string',\n                                                                                          'enum': ['bar',\n                                                                                                   'line',\n                                                                                                   'area',\n                                                                                                   'pie',\n                                                                                                   'scatter',\n                                                                                                   'heatmap',\n                                                                                                   'waterfall',\n                                                                                                   'combo',\n                                                                                                   'other'],\n                                                                                          'description': '兼容旧命名见 '\n                                                                                                         'compat.type_aliases'},\n                                                                                 'chart_subtype': {'type': 'string',\n                                                                                                   'enum': ['plain',\n                                                                                                            'stacked',\n                                                                                                            'stacked_100',\n                                                                                                            'grouped',\n                                                                                                            'dual_axis',\n                                                                                                            'other'],\n                                                                                                   'default': 'plain'},\n                                                                                 'entities': {'type': 'array',\n                                                                                              'items': {'type': 'string'}},\n                                                                                 'axes': {'type': 'object',\n                                                                                          'properties': {'x': {'type': 'object',\n                                                                                                               'properties': {'type': {'type': 'string',\n                                                                                                                                       'enum': ['time',\n                                                                                                                                                'category',\n                                                                                                                                                'number',\n                                                                                                                                                'fiscal_quarter',\n                                                                                                                                                'fiscal_year']},\n                                                                                                                              'calendar': {'type': 'string',\n                                                                                                                                           'enum': ['fiscal',\n                                                                                                                                                    'calendar'],\n                                                                                                                                           'description': 'x '\n                                                                                                                                                          '轴若为时间/期间，标注口径'},\n                                                                                                                              'fiscal_year_end_month': {'type': 'integer',\n                                                                                                                                                        'minimum': 1,\n                                                                                                                                                        'maximum': 12},\n                                                                                                                              'time_format': {'type': 'string',\n                                                                                                                                              'description': '如 '\n                                                                                                                                                             'YYYY, '\n                                                                                                                                                             'YYYY-MM, '\n                                                                                                                                                             'YYYYQn'},\n                                                                                                                              'labels_raw': {'type': 'array',\n                                                                                                                                             'items': {'type': 'string'}},\n                                                                                                                              'labels_norm': {'type': 'array',\n                                                                                                                                              'items': {'type': 'string'}},\n                                                                                                                              'fiscal_periods': {'type': 'array',\n                                                                                                                                                 'items': {'$ref': '#/$defs/fiscal_period'}}}},\n                                                                                                         'y_left': {'type': 'object',\n                                                                                                                    'properties': {'unit': {'type': 'string',\n                                                                                                                                            'description': '%, '\n                                                                                                                                                           'bp, '\n                                                                                                                                                           'USD, '\n                                                                                                                                                           'USD/share '\n                                                                                                                                                           '等'},\n                                                                                                                                   'log': {'type': 'boolean'},\n                                                                                                                                   'range': {'$ref': '#/$defs/num_range'}}},\n                                                                                                         'y_right': {'type': 'object',\n                                                                                                                     'properties': {'unit': {'type': 'string',\n                                                                                                                                             'description': '%, '\n                                                                                                                                                            'bp, '\n                                                                                                                                                            'USD, '\n                                                                                                                                                            'USD/share '\n                                                                                                                                                            '等'},\n                                                                                                                                    'log': {'type': 'boolean'},\n                                                                                                                                    'range': {'$ref': '#/$defs/num_range'}}}}},\n                                                                                 'series': {'type': 'array',\n                                                                                            'minItems': 1,\n                                                                                            'items': {'type': 'object',\n                                                                                                      'required': ['name',\n                                                                                                                   'unit',\n                                                                                                                   'values'],\n                                                                                                      'properties': {'name': {'type': 'string'},\n                                                                                                                     'unit': {'type': 'string',\n                                                                                                                              'description': '以基准单位表示；百分比建议0–1'},\n                                                                                                                     'values': {'type': 'array',\n                                                                                                                                'items': {'type': ['number',\n                                                                                                                                                   'null']},\n                                                                                                                                'description': '缺失用 '\n                                                                                                                                               'null'},\n                                                                                                                     'values_text': {'type': 'array',\n                                                                                                                                     'items': {'type': ['string',\n                                                                                                                                                        'null']},\n                                                                                                                                     'description': '原始文本（可选）'},\n                                                                                                                     'y_axis': {'type': 'string',\n                                                                                                                                'enum': ['left',\n                                                                                                                                         'right'],\n                                                                                                                                'default': 'left'},\n                                                                                                                     'role': {'type': 'string',\n                                                                                                                              'enum': ['actual',\n                                                                                                                                       'forecast',\n                                                                                                                                       'consensus',\n                                                                                                                                       'guidance',\n                                                                                                                                       'other'],\n                                                                                                                              'default': 'actual'},\n                                                                                                                     'multiplier': {'type': 'number',\n                                                                                                                                    'description': '用于从原单位换算到基准单位（如亿元→元）'},\n                                                                                                                     'confidence': {'type': 'number',\n                                                                                                                                    'minimum': 0,\n                                                                                                                                    'maximum': 1},\n                                                                                                                     'notes': {'type': 'string'}}}},\n                                                                                 'image_ref': {'type': 'string',\n                                                                                               'description': '图像文件路径/ID（可选）'},\n                                                                                 'image_hash': {'type': 'string',\n                                                                                                'description': '原图hash（便于去重）'},\n                                                                                 'provenance': {'$ref': '#/$defs/provenance'},\n                                                                                 'qa_flags': {'type': 'array',\n                                                                                              'items': {'type': 'string',\n                                                                                                        'enum': ['missing_ticks',\n                                                                                                                 'suspicious_sum',\n                                                                                                                 'low_ocr_conf',\n                                                                                                                 'unit_inferred',\n                                                                                                                 'layout_overlap',\n                                                                                                                 'other']}},\n                                                                                 'raw_figure': {'type': 'object',\n                                                                                                'description': '兼容/保底：吸收另一份结构的轻量表达，便于迁移与比对',\n                                                                                                'properties': {'type': {'type': 'string',\n                                                                                                                        'description': '如 '\n                                                                                                                                       'bar_chart/pie_chart（仅做保留，不参与标准化）'},\n                                                                                                               'data': {'type': 'object',\n                                                                                                                        'properties': {'labels': {'type': 'array',\n                                                                                                                                                  'items': {'type': 'string'}},\n                                                                                                                                       'series': {'type': 'array',\n                                                                                                                                                  'items': {'type': 'object',\n                                                                                                                                                            'properties': {'name': {'type': 'string'},\n                                                                                                                                                                           'values': {'type': 'array',\n                                                                                                                                                                                      'items': {'type': ['number',\n                                                                                                                                                                                                         'string',\n                                                                                                                                                                                                         'null']}},\n                                                                                                                                                                           'unit': {'type': 'string'}}}}}}}}}}},\n                                            'tables': {'type': 'array',\n                                                       'description': '表格（表头+单元格结构化，适合直接落库）',\n                                                       'items': {'type': 'object',\n                                                                 'required': ['table_id',\n                                                                              'title',\n                                                                              'page',\n                                                                              'columns',\n                                                                              'rows',\n                                                                              'provenance'],\n                                                                 'properties': {'table_id': {'type': 'string'},\n                                                                                'title': {'type': 'string'},\n                                                                                'caption': {'type': 'string'},\n                                                                                'page': {'type': 'integer',\n                                                                                         'minimum': 1},\n                                                                                'columns': {'type': 'array',\n                                                                                            'items': {'type': 'string'},\n                                                                                            'minItems': 1},\n                                                                                'column_types': {'type': 'object',\n                                                                                                 'additionalProperties': {'type': 'string',\n                                                                                                                          'enum': ['string',\n                                                                                                                                   'number',\n                                                                                                                                   'percentage',\n                                                                                                                                   'currency',\n                                                                                                                                   'date',\n                                                                                                                                   'period',\n                                                                                                                                   'other']}},\n                                                                                'header_units': {'type': 'object',\n                                                                                                 'description': '列级单位提示（如 '\n                                                                                                                'USD '\n                                                                                                                'mn, '\n                                                                                                                '%）',\n                                                                                                 'additionalProperties': {'type': 'string'}},\n                                                                                'rows': {'type': 'array',\n                                                                                         'minItems': 1,\n                                                                                         'items': {'type': 'object',\n                                                                                                   'description': '列名→单元格的映射',\n                                                                                                   'additionalProperties': {'oneOf': [{'type': ['string',\n                                                                                                                                                'number',\n                                                                                                                                                'null']},\n                                                                                                                                      {'type': 'object',\n                                                                                                                                       'properties': {'value': {'type': ['number',\n                                                                                                                                                                         'null']},\n                                                                                                                                                      'value_text': {'type': ['string',\n                                                                                                                                                                              'null']},\n                                                                                                                                                      'unit': {'type': ['string',\n                                                                                                                                                                        'null']},\n                                                                                                                                                      'as_of': {'type': ['string',\n                                                                                                                                                                         'null'],\n                                                                                                                                                                'format': 'date'},\n                                                                                                                                                      'fiscal_period': {'type': ['string',\n                                                                                                                                                                                 'null'],\n                                                                                                                                                                        '$ref': '#/$defs/fiscal_period'},\n                                                                                                                                                      'entity_id': {'type': ['string',\n                                                                                                                                                                             'null']}}}]}}},\n                                                                                'provenance': {'$ref': '#/$defs/provenance'},\n                                                                                'qa_flags': {'type': 'array',\n                                                                                             'items': {'type': 'string'}}}}},\n                                            'numerical_data': {'type': 'array',\n                                                               'description': '原子数值事实：方便纵向汇总与RAG引用',\n                                                               'items': {'type': 'object',\n                                                                         'required': ['num_id',\n                                                                                      'context',\n                                                                                      'metric_type',\n                                                                                      'unit',\n                                                                                      'value',\n                                                                                      'provenance'],\n                                                                         'properties': {'num_id': {'type': 'string'},\n                                                                                        'entity_id': {'type': 'string'},\n                                                                                        'context': {'type': 'string',\n                                                                                                    'description': '指标语境（如 '\n                                                                                                                   'iPhone '\n                                                                                                                   'revenue, '\n                                                                                                                   'ISG '\n                                                                                                                   'margin）'},\n                                                                                        'metric_type': {'type': 'string',\n                                                                                                        'enum': ['currency',\n                                                                                                                 'percentage',\n                                                                                                                 'basis_points',\n                                                                                                                 'multiple',\n                                                                                                                 'count',\n                                                                                                                 'ratio',\n                                                                                                                 'per_share',\n                                                                                                                 'duration',\n                                                                                                                 'other']},\n                                                                                        'value': {'type': 'number',\n                                                                                                  'description': '基准单位可计算值（百分比建议0–1）'},\n                                                                                        'value_text': {'type': 'string',\n                                                                                                       'description': '原文字符串（如 '\n                                                                                                                      '$89.5B '\n                                                                                                                      '/ '\n                                                                                                                      '18.2%）'},\n                                                                                        'unit': {'type': 'string',\n                                                                                                 'description': 'USD, '\n                                                                                                                '%, '\n                                                                                                                'bp, '\n                                                                                                                'USD/share '\n                                                                                                                '等'},\n                                                                                        'scale': {'type': 'string',\n                                                                                                  'enum': ['ones',\n                                                                                                           'thousands',\n                                                                                                           'millions',\n                                                                                                           'billions',\n                                                                                                           'trillions'],\n                                                                                                  'default': 'ones'},\n                                                                                        'multiplier': {'type': 'number',\n                                                                                                       'description': '从原单位到基准单位的换算系数'},\n                                                                                        'rounding': {'type': 'integer',\n                                                                                                     'description': '原文四舍五入位数（如 '\n                                                                                                                    '1 '\n                                                                                                                    '表示1位小数）'},\n                                                                                        'as_of': {'type': 'string',\n                                                                                                  'format': 'date'},\n                                                                                        'fiscal_period': {'$ref': '#/$defs/fiscal_period'},\n                                                                                        'figure_id': {'type': 'string'},\n                                                                                        'table_id': {'type': 'string'},\n                                                                                        'passage_id': {'type': 'string'},\n                                                                                        'provenance': {'type': 'object',\n                                                                                                       'required': ['page'],\n                                                                                                       'properties': {'page': {'type': 'integer',\n                                                                                                                               'minimum': 1},\n                                                                                                                      'bbox': {'$ref': '#/$defs/bbox'},\n                                                                                                                      'sentence_id': {'type': 'integer'},\n                                                                                                                      'line_idx': {'type': 'integer'},\n                                                                                                                      'source_snippet': {'type': 'string'}}},\n                                                                                        'confidence': {'$ref': '#/$defs/confidence'},\n                                                                                        'qa_flags': {'type': 'array',\n                                                                                                     'items': {'type': 'string'}}}}},\n                                            'claims': {'type': 'array',\n                                                       'description': '文本性主张/结论，并链接证据',\n                                                       'items': {'type': 'object',\n                                                                 'required': ['claim_id',\n                                                                              'text',\n                                                                              'passage_id'],\n                                                                 'properties': {'claim_id': {'type': 'string'},\n                                                                                'text': {'type': 'string'},\n                                                                                'label': {'type': 'string',\n                                                                                          'enum': ['guidance_up',\n                                                                                                   'guidance_down',\n                                                                                                   'risk',\n                                                                                                   'outlook',\n                                                                                                   'strategy',\n                                                                                                   'other']},\n                                                                                'sentiment': {'type': 'string',\n                                                                                              'enum': ['pos',\n                                                                                                       'neg',\n                                                                                                       'neu']},\n                                                                                'passage_id': {'type': 'string'},\n                                                                                'evidence': {'type': 'object',\n                                                                                             'properties': {'figure_ids': {'type': 'array',\n                                                                                                                           'items': {'type': 'string'}},\n                                                                                                            'table_ids': {'type': 'array',\n                                                                                                                          'items': {'type': 'string'}},\n                                                                                                            'num_ids': {'type': 'array',\n                                                                                                                        'items': {'type': 'string'}}}}}}},\n                                            'relations': {'type': 'array',\n                                                          'description': '三元组/关系：实体与指标/事件的结构化连接',\n                                                          'items': {'type': 'object',\n                                                                    'required': ['rel_id',\n                                                                                 'subject',\n                                                                                 'predicate',\n                                                                                 'object'],\n                                                                    'properties': {'rel_id': {'type': 'string'},\n                                                                                   'subject': {'type': 'string',\n                                                                                               'description': 'entity_id '\n                                                                                                              '或文本'},\n                                                                                   'predicate': {'type': 'string',\n                                                                                                 'description': '如 '\n                                                                                                                'reports, '\n                                                                                                                'beats, '\n                                                                                                                'guides, '\n                                                                                                                'acquires'},\n                                                                                   'object': {'type': 'string'},\n                                                                                   'time': {'type': 'string',\n                                                                                            'format': 'date'},\n                                                                                   'provenance': {'type': 'object',\n                                                                                                  'properties': {'page': {'type': 'integer'},\n                                                                                                                 'passage_id': {'type': 'string'}}}}}},\n                                            'reference_lists': {'type': 'object',\n                                                                'description': '轻量参考清单（兼容旧结构）',\n                                                                'properties': {'companies': {'type': 'array',\n                                                                                             'items': {'type': 'string'}},\n                                                                               'key_metrics': {'type': 'array',\n                                                                                               'items': {'type': 'string'}}}},\n                                            'extraction_summary': {'type': 'object',\n                                                                   'required': ['figures_count',\n                                                                                'tables_count',\n                                                                                'numerical_data_count'],\n                                                                   'properties': {'figures_count': {'type': 'integer',\n                                                                                                    'minimum': 0},\n                                                                                  'tables_count': {'type': 'integer',\n                                                                                                   'minimum': 0},\n                                                                                  'numerical_data_count': {'type': 'integer',\n                                                                                                           'minimum': 0},\n                                                                                  'entities_count': {'type': 'integer',\n                                                                                                     'minimum': 0},\n                                                                                  'passages_count': {'type': 'integer',\n                                                                                                     'minimum': 0},\n                                                                                  'figures_with_linked_data': {'type': 'integer',\n                                                                                                               'minimum': 0},\n                                                                                  'companies_mentioned': {'type': 'integer',\n                                                                                                          'minimum': 0},\n                                                                                  'validation_summary': {'type': 'object',\n                                                                                                         'properties': {'original_figures': {'type': 'integer',\n                                                                                                                                             'minimum': 0},\n                                                                                                                        'kept_figures': {'type': 'integer',\n                                                                                                                                         'minimum': 0},\n                                                                                                                        'original_numerical': {'type': 'integer',\n                                                                                                                                               'minimum': 0},\n                                                                                                                        'kept_numerical': {'type': 'integer',\n                                                                                                                                           'minimum': 0},\n                                                                                                                        'method': {'type': 'string'},\n                                                                                                                        'validation_method': {'type': 'string',\n                                                                                                                                              'description': '兼容旧字段名'},\n                                                                                                                        'data_accuracy_rate': {'type': 'number',\n                                                                                                                                               'minimum': 0,\n                                                                                                                                               'maximum': 100}}}}}}},\n                    'query_capabilities': {'type': 'object',\n                                           'properties': {'query_language': {'type': 'string',\n                                                                             'enum': ['jsonpath',\n                                                                                      'jmespath',\n                                                                                      'fieldlist']},\n                                                          'description': {'type': 'string'},\n                                                          'searchable_fields': {'type': 'array',\n                                                                                'items': {'type': 'string'}},\n                                                          'figure_data_available': {'type': 'boolean'},\n                                                          'can_recreate_charts': {'type': 'boolean'}}},\n                    'errors': {'type': 'array',\n                               'items': {'type': 'object',\n                                         'properties': {'code': {'type': 'string'},\n                                                        'message': {'type': 'string'},\n                                                        'severity': {'type': 'string',\n                                                                     'enum': ['info',\n                                                                              'warn',\n                                                                              'error']},\n                                                        'retryable': {'type': 'boolean'}}}},\n                    'unknowns': {'type': 'array',\n                                 'items': {'type': 'object',\n                                           'properties': {'type': {'type': 'string'},\n                                                          'raw': {'type': 'string'},\n                                                          'page': {'type': 'integer'}}}},\n                    'compat': {'type': 'object',\n                               'description': '兼容与迁移设置',\n                               'properties': {'accepts_legacy_versions': {'type': 'array',\n                                                                          'items': {'type': 'string',\n                                                                                    'enum': ['1.3.0']},\n                                                                          'default': ['1.3.0']},\n                                              'type_aliases': {'type': 'object',\n                                                               'description': '旧类型名 '\n                                                                              '→ '\n                                                                              '新类型名的映射，如 '\n                                                                              'bar_chart→bar',\n                                                               'additionalProperties': {'type': 'string'}},\n                                              'qwen_legacy': {'type': 'boolean'}}}},\n     '$defs': {'bbox': {'type': 'array',\n                        'items': {'type': 'number'},\n                        'minItems': 4,\n                        'maxItems': 4,\n                        'description': '左上x, 左上y, 右下x, 右下y（像素/比例）'},\n               'num_range': {'type': 'object',\n                             'properties': {'min': {'type': ['number',\n                                                             'null']},\n                                            'max': {'type': ['number',\n                                                             'null']}}},\n               'fiscal_period': {'type': 'string',\n                                 'pattern': '^(FY|CY)\\\\d{4}((Q[1-4])|(H[12]))?$',\n                                 'description': '支持 FY/CY + 年 + 季度/半年（如 '\n                                                'FY2024Q4, CY2025H1）'},\n               'confidence': {'type': 'object',\n                              'properties': {'ocr': {'type': 'number',\n                                                     'minimum': 0,\n                                                     'maximum': 1},\n                                             'nlp': {'type': 'number',\n                                                     'minimum': 0,\n                                                     'maximum': 1},\n                                             'normalization': {'type': 'number',\n                                                               'minimum': 0,\n                                                               'maximum': 1},\n                                             'overall': {'type': 'number',\n                                                         'minimum': 0,\n                                                         'maximum': 1}}},\n               'provenance': {'type': 'object',\n                              'required': ['page'],\n                              'properties': {'page': {'type': 'integer',\n                                                      'minimum': 1},\n                                             'bbox': {'$ref': '#/$defs/bbox'},\n                                             'source_snippet': {'type': 'string'},\n                                             'layout_block_id': {'type': 'string'},\n                                             'passage_id': {'type': 'string'}}}}}\n\nOn instance:\n    {'_id': 'test_document_12345',\n     'source': {'file_name': 'test_document.pdf',\n                'processing_metadata': {'vision_model': 'test-vision-model',\n                                        'synthesis_model': 'test-synthesis-model',\n                                        'validation_model': 'test-validation-model',\n                                        'processed_at': '2024-10-21T10:00:00Z',\n                                        'pages_processed': 1,\n                                        'successful_pages': 1}},\n     'report': {'title': 'Test Financial Report',\n                'report_date': '2024-10-21',\n                'report_type': 'company',\n                'symbols': ['TEST'],\n                'sector': 'Technology',\n                'content': 'This is a test report content.',\n                'word_count': 100},\n     'data': {'figures': [{'figure_id': 'test_revenue_chart',\n                           'type': 'bar_chart',\n                           'title': 'Revenue Growth',\n                           'description': 'Quarterly revenue growth',\n                           'data': {'labels': ['Q1', 'Q2', 'Q3', 'Q4'],\n                                    'series': [{'name': 'Revenue',\n                                                'values': [100,\n                                                           120,\n                                                           135,\n                                                           150],\n                                                'unit': 'M'}]}}],\n              'tables': [{'table_id': 'financial_table_1',\n                          'title': 'Quarterly Financials',\n                          'rows': [{'quarter': 'Q1',\n                                    'revenue': 25,\n                                    'profit': 5},\n                                   {'quarter': 'Q2',\n                                    'revenue': 30,\n                                    'profit': 6}]}],\n              'numerical_data': [{'metric': 'growth_rate',\n                                  'value': 15,\n                                  'unit': '%',\n                                  'time_period': 'Q2 2024'}]}}",
        "auto_fix": "SUCCESS",
        "auto_fix_warnings": [
          "添加缺失字段: schema_version",
          "添加缺失字段: doc",
          "添加缺失字段: passages",
          "添加缺失字段: entities",
          "添加缺失字段: data"
        ]
      }
    },
    "GPU显存测试": {
      "status": "PASS",
      "details": {
        "cuda": true,
        "gpu_name": "NVIDIA GeForce RTX 4090",
        "total_memory_gb": 47.98779296875
      }
    },
    "模型加载测试": {
      "status": "PASS",
      "details": {
        "model_initialized": true,
        "sampling_params": {
          "temperature": 0.0,
          "top_p": 1.0,
          "max_tokens": 8192
        }
      }
    },
    "图像处理测试": {
      "status": "PASS",
      "details": {
        "test_pdf": "SKIPPED: test_layouts.pdf 不存在"
      }
    }
  }
}